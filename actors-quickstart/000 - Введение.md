# Введение

Akka - это фреймворк, предоставляющий готовую среду и средства для построения высоконагруженных систем, которые эффективно используют ресурсы машины (**легковесные потоки**), и даже намного больше:

- кластеризация из коробки;
- описание логики потоковой обработки данных;
- построение отказоустойчивых реактивных систем из коробки;
- другие реактивные штуки.

*Реактивное программирование — парадигма программирования, ориентированная на потоки данных и распространение изменений. Это означает, что должна существовать возможность легко выражать статические и динамические потоки данных, а также то, что нижележащая модель исполнения должна автоматически распространять изменения благодаря потоку данных. К примеру, в императивном программировании присваивание `a = b + c` будет означать, что переменной `a` будет присвоен результат выполнения операции `b + c`, используя текущие (на момент вычисления) значения переменных. Позже значения переменных `b` и `c` могут быть изменены без какого-либо влияния на значение переменной `a`. В реактивном же программировании значение `a` будет автоматически пересчитано, основываясь на новых значениях.*


## Акторы

Основная философия — **все есть Актор**.

Актор - это сущность, которая принимает сообщения, на которые может отреагировать следующими действиями:

- Отправить N сообщений другим Акторам (кроме себя);
- Породить M новых Акторов;
- Изменить внутреннее состояние (что отразится на последующие реакции на входящие сообщения).


## Структура фреймворка

- Actor - класс, описывающий логику работы с сообщениями. Инкапсулирует логически завершенный функционал, атомарно выполняющийся в однопоточном режиме (многопоточность достигается за счет порождения нескольких одинаковых экзепляров вашего актора);
- Messages - экземпляр класса, отправляемый одним Актором асинхронно, а также асинхронно получаемый другим;
- Dispatcher - диспетчер, отвечаюший за помещение акторов на исполнение на пуле потоков, когда приходит новое сообщение для этого актора;
- Mailboxes - очередь сообщений, хранящая переданные конкретному актору послания, в отдельном случае почтовый ящик делится группой акторов.


## Основные принципы

- **отсутствие API акторов**, прямого обращения к экземпляру актора принципиально нет, только через сообщения;
- **сообщения иммутабельны**, нельзя изменять поля объекта сообщения после отправки;
- **негарантированная доставка**, нет гарантии сохранения последовательности сообщений от разных акторов, но есть гарантия последовательности от одного.


## Принципы построения приложений

Сначала описываем сущности:

- Акторы и сообщения, которые они принимают;
- Логику акторов - как реагируют на известные и неизвестные сообщения;
- Процесс бутстрапинга системы.

Всё начинается с первого сообщения, которое передаётся некоторому Актору, а дальше:

- О новом сообщении оповещается Dispatcher, управляющий данным актором;
- Dispatcher ставит обработчик актора входящих сообщений (Receive) на поток из управляемого им пула;
- Пока актор выполняет обработку текущего сообщения, новые копятся в Mailbox-е.






Источник: Maxim Sidorov (https://medium.com/@maximsidorov)
 https://medium.com/@maximsidorov/akka-%D0%BE-%D1%87%D0%B5%D0%BC-%D0%B2%D1%81%D0%B5-%D1%8D%D1%82%D0%B8-%D0%B0%D0%BA%D1%82%D0%BE%D1%80%D1%8B-%D0%B8-%D0%B7%D0%B0%D1%87%D0%B5%D0%BC-%D0%B2%D0%B0%D0%BC-akka-cad22a30747